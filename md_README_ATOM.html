<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Goldboard4: Atom mit Platform-IO Plugin</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Goldboard4
   &#160;<span id="projectnumber">V2.2</span>
   </div>
   <div id="projectbrief">Library for the Goldboard4</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Suchen" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Erzeugt von Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Suchen');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_README_ATOM.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Atom mit Platform-IO Plugin </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Vorraussetzung für die folgenden Schritte ist eine erfolgreiche installation der Atom-IDE.</p>
<h3>Installation des Platform-IO Plugin</h3>
<p>Das Plugin wird über den internen plugin manager installiert. Eine internetverbindung ist nötig. </p><div class="image">
<img src="install_1.png" alt="install_1.png"/>
</div>
 <div class="image">
<img src="install_2.png" alt="install_2.png"/>
</div>
 <div class="image">
<img src="install_3.png" alt="install_3.png"/>
</div>
<p> Die installation von Clang ist optional. </p><div class="image">
<img src="install_4.png" alt="install_4.png"/>
</div>
<h3>Projekt erstellen</h3>
<p>Um ein neues Projekt zu erstellen muss das <a href="https://github.com/teeheee/goldboard4/raw/master/goldboard4-AtomPio-template.zip">Platform IO Template</a> heruntergeladen werden und an dem bevorzugten Speicherort extrahiert werden. Es bietet sich an das Template Archiv für später zwischen zu speichern. Mit dem Menüpunkt Add Projekt Folder kann der Ordner geöffnet werden. </p><div class="image">
<img src="usage_1.png" alt="usage_1.png"/>
</div>
<p> Die main.cpp findet ihr im src Ordner. Mit dem Haken am linken Rand könnt ihr Compilieren. Der Pfeil ist fürs übertragen. Der Stecker links unten ist für den Seriel Monitor. </p><div class="image">
<img src="usage_2.png" alt="usage_2.png"/>
</div>
<p> Damit der Serialmonitor funktioniert muss die Baudrate 115200 eingestellt werden. </p><div class="image">
<img src="usage_3.png" alt="usage_3.png"/>
</div>
<h3>Fuses und Bootloader übertragen</h3>
<p>Um die Fuses und den Bootloader übertagen zu können muss in platformio.ini ein Programmer ausgewählt werden der keinen Bootloader benötigt. Also entweder stk500 oder avrispmkii.</p>
<div class="image">
<img src="bootloader_fuses_3.png" alt="bootloader_fuses_3.png"/>
</div>
<p> Nun könnt ihr links unten über das Terminal Symbol eine Konsole öffnen und folgende Befehle eingeben. Für den Bootloader:</p>
<blockquote class="doxtable">
<p>pio run -t uploadboot </p>
</blockquote>
<p>Für die Fuses:</p>
<blockquote class="doxtable">
<p>pio run -t fuse </p>
</blockquote>
<p>Es werden nun automatisch die richtigen Fuses oder der Bootloader übertragen. Beim übertragen des Bootloaders sollte die Led am Goldboard blinken.</p>
<h3>Andere Befehle</h3>
<p>Eine kurze Übersicht über alle Befehle:</p>
<p>Fuses setzen: </p><blockquote class="doxtable">
<p>pio run -t fuse </p>
</blockquote>
<p>Bootloader übertragen: </p><blockquote class="doxtable">
<p>pio run -t uploadboot </p>
</blockquote>
<p>Programm compilieren </p><blockquote class="doxtable">
<p>pio run </p>
</blockquote>
<p>Programm übertragen: </p><blockquote class="doxtable">
<p>pio run -t upload </p>
</blockquote>
<p>Goldboardlib updaten: </p><blockquote class="doxtable">
<p>pio run -t update </p>
</blockquote>
<p>Simulator starten: </p><blockquote class="doxtable">
<p>pio run -t simulate </p>
</blockquote>
<p>Für den simulate Befehl muss der Simulator von <a href="https://github.com/teeheee/goldboard4-simulator">https://github.com/teeheee/goldboard4-simulator</a> heruntergeladen werden und die config.json Datei wie folgt angepasst werden:</p>
<p>''' { "firmware" : ".pioenvs/main/firmware.hex", .... } '''</p>
<h3>Problemlösungen</h3>
<h4>Problem: Übertragen mit dem avrispmkii geht nicht.</h4>
<blockquote class="doxtable">
<p>avrdude done. Thank you. *** Error 1 </p>
</blockquote>
<p>Lösung:</p>
<ol type="1">
<li>Lade zadig-x.x.exe von <a href="https://zadig.akeo.ie/">https://zadig.akeo.ie/</a> herunter</li>
<li>Öffne das Programm und aktiviere "List All Devices" unter "Options"</li>
<li>installiere libusb-win32 für den avrispmkii</li>
<li>merk dir, dass du den Treiber wieder zurückstellen musst, wenn du Atmel Studio mit dem avrispmkii verwenden willst.</li>
</ol>
<h4>Problem: Übertragen vom Programm mit dem Bootloader (arduino) hängt.</h4>
<blockquote class="doxtable">
<p>irngendwas mit timeout </p>
</blockquote>
<p>Lösung:</p>
<ol type="1">
<li>reset Knopf drücken</li>
<li>weniger Daten mit SERIAL_PRINTLN ausgeben (delay(1000)!!!)</li>
<li>SERIAL_BLOCKER in <a class="el" href="config_8h_source.html">config.h</a> auskommentieren </li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Erzeugt von
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
